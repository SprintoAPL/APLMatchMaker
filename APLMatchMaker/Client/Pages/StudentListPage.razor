@page "/ListOfStudents"

@using APLMatchMaker.Shared.DTOs.StudentsDTOs
@using APLMatchMaker.Client.Components

<h3 class="m3">Studentlista</h3>
<div style="padding: 0.4rem 1rem;">
        <form @onsubmit="SearchStudents">
            <input type="search" style="width: 20rem;" @bind="searchText" placeholder="Sök student..." />
            <button class="btn btn-primary" type="submit">Sök</button>
            <button class="btn btn-success" @onclick="CreateNewStudent"><i class="oi oi-plus"></i> Lägg till ny student</button>
        </form>
</div>


@if (PageListStudents == null && errorMessage == null)
{
    <p>Läser in...</p>
}
else if (errorMessage != null)
{
    <p class="alert alert-danger">Error: @errorMessage</p>
}
else if (PageListStudents!.Count() == 0)
{
    <p>Ingen student hittad.</p>
}
else
{

    <div class="m-3">
        <StudentList Students="PageListStudents" />
    </div>
    <nav class="buttonrow">
        <ul class="pagination">
            <li class="page-item">
                <a class="page-link" href="#" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            <li class="page-item"><a class="page-link" href="#">1</a></li>
            <li class="page-item"><a class="page-link" href="#">2</a></li>
            <li class="page-item"><a class="page-link" href="#">3</a></li>
            <li class="page-item"><a class="page-link" href="#">4</a></li>
            <li class="page-item">
                <a class="page-link" href="#" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
        </ul>
    </nav>
    
    <p>
        Sidan @paginationMetadata!.CurrentPage av @paginationMetadata.TotalPages sidor.<br />
        Visar @paginationMetadata!.PageSize elever per sida.<br />
        Totalt @paginationMetadata.TotalCount elever.<br />
        @if (!(paginationMetadata.PreviousPageLink == null))
        {
            <a class="link" @onclick="GoToPrevious">Föregående sida</a> <span>&nbsp</span>
        }
        @if (!(paginationMetadata.NextPageLink == null))
        {
            <a class="link" @onclick="GoToNext">Nästa sida</a>
        }
    </p>
    
}

@if (debug)
{
    <div class="alert alert-warning">
        <p>Pagination Json:<br />@pagination</p>
        <p>navLink:<br />@navLink</p>
    </div>
}